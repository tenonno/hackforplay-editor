<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <style media="screen">
    .h4p__iframe_container {
      position: absolute;
      top: 0;
      left: 0;
      padding: 0;
      margin: 0;
    }
    .h4p__iframe_container>iframe {
      position: fixed;
      top: 0;
      left: 0;
      z-index: 1;
      border: 0 none;
      width: 100vw;
      height: 100vh;

      /* extra settings */
      background-color: rgba(0, 0, 0, 0.1);
    }
    </style>
    <script src="./postmate.min.js" charset="utf-8"></script>
    <script async type="text/javascript">

    window.addEventListener('load', function () {
      // Make a container
      var container = document.createElement('div');
      container.classList.add('h4p__iframe_container');
      document.body.appendChild(container);
      // Make an iframe and do handshake
      Postmate.debug = true;
      new Postmate({
        container: container,
        url: './editor.html',
        model: {
          files: [{
            filename: 'main.js',
            code: document.getElementById('example1').textContent.replace(/\n    /g, '\n')
          }]
        }
      })
      .then(function (child) {

        // eval them
        child.on('run', function (files) {
          files.forEach(function (file) {
            eval(file.code);
          });
        });

      });
    });

    </script>
    <script id="example1" type="hack">

    // This code will execute when run it.
    alert('Have a nice hack! ;-)');

    </script>
  </head>
  <body>
    Welcome hackforplay-editor<br />
    <a href="https://github.com/teramotodaiki/hackforplay-editor">GitHub</a>
  </body>
</html>
